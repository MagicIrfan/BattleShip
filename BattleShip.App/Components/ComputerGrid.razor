@inject IGameService GameService

<p>Is Placing Boats in Child: @IsPlacingBoats</p>
<div class="grid">
    @for (int row = 0; row < PositionsData.Length; row++)
    {
        @for (int col = 0; col < PositionsData[0].Length; col++)
        {
            var currentRow = row;
            var currentCol = col;

            Position opponentPosition = PositionsData[col][row].Position;

            string cellBackGroundColor = "";

            if (opponentPosition.IsHit)
            {
                cellBackGroundColor = "red";
            }

            if (PositionsData[col][row].isMiss)
            {
                cellBackGroundColor = "blue";
            }

            <button class="cell" @onclick="() => Attack(opponentPosition)"
                    style="background-color: @(cellBackGroundColor)"
                    disabled="@(opponentPosition.IsHit || PositionsData[col][row].isMiss || IsPlacingBoats)">
            </button>
        }
    }
</div>

@code {
    [Parameter]
    public PositionData[][] PositionsData { get; set; }
    [Parameter]
    public bool IsPlacingBoats { get; set; }

    private async Task Attack(Position position)
    {
        await GameService.Attack(position);
        StateHasChanged();
    }
}

<style>
    .grid {
        display: grid;
        grid-template-columns: repeat(10, 1fr);
        grid-template-rows: repeat(10, 1fr);
        gap: 5px;
        background-color: #dce7f1;
        padding: 10px;
        border-radius: 10px;
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
    }

    .cell {
        width: 40px;
        height: 40px;
        border: 1px solid #b0c4de;
        border-radius: 4px;
        position: relative;
    }

        .cell:not([disabled]):hover {
            background-color: #7fc9ff;
        }

        .cell:not([disabled]) {
            cursor: pointer;
            transition: transform 0.2s, background-color 0.2s;
        }

    .boat-symbol {
        font-weight: bold;
        color: darkblue;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
    }
</style>