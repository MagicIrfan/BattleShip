@page "/game"
@inject IGameService GameService
@inject IJSRuntime JsRuntime
@attribute [Authorize]

<PageTitle>BattleShip</PageTitle>

<main>
    @if (GameService.gameId != null)
    {
        <div class="grids">
            <PlayerGrid IsPlacingBoats="isPlacingBoats" PositionsData="GameService.playerGrid.PositionsData" OnTogglePlacingBoats="TogglePlacingBoats"></PlayerGrid>
            <ComputerGrid IsPlacingBoats="isPlacingBoats" PositionsData="GameService.opponentGrid.PositionsData"></ComputerGrid>
        </div>
    }
    else
    {
        <p>Chargement ...</p>
    }
</main>

<style>
    .grids {
        display: flex;
        gap: 50px;
        justify-content: center;
        align-items: center;
    }
</style>

@code {
    bool isPlacingBoats = true;
    private void TogglePlacingBoats()
    {
        isPlacingBoats = !isPlacingBoats;
    }
    protected override async Task OnInitializedAsync()
    {
        await GameService.StartGame();
    }
}
